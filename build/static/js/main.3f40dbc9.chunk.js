(this.webpackJsonpcloudpt=this.webpackJsonpcloudpt||[]).push([[0],{66:function(e,t,a){e.exports=a(83)},73:function(e,t,a){},76:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);a(67);var n=a(0),s=a.n(n),r=a(26),i=a.n(r),l=(a(73),a(3)),c=a.n(l),o=a(8),u=a(10),m=a(9),h=a(11),d=a(12),p=a(13),g=a(2),f=a(27),b=a(22),E=(a(75),a(4)),v=(a(76),a(31)),y=a.n(v),w=a(32),N=a.n(w),j=a(34),C=a.n(j),k=a(45),O=a.n(k),x=a(46),S=a.n(x),T=a(48),A=a.n(T),U=a(47),L=a.n(U),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChangeEmail=a.onChangeEmail.bind(Object(E.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(E.a)(a)),a.onSubmit=a.onSubmit.bind(Object(E.a)(a)),a.state={email:"",password:"",errorMessage:"",showError:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){fetch("/api/auth/",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){e.json().then((function(e){"/home"===e.redirect&&(window.location="/home")}))})).catch((function(e){return console.log(e)})),y()((function(){y()(".scroll-down").click((function(){return y()("html, body").animate({scrollTop:y()("section.scrollTo").offset().top},"slow"),!1}))}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=JSON.stringify(this.state);fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:a}).then((function(e){e.json().then((function(e){!0===e.auth?window.location="/home":t.setState({errorMessage:"Incorrect email or password",showError:!0,password:""})}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"fullscreen-bg"},s.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"",className:"fullscreen-bg__video"},s.a.createElement("source",{src:"/login-video.mp4",type:"video/mp4"}))),s.a.createElement("div",{style:{marginTop:10}},s.a.createElement("p",{className:"appTitle"},s.a.createElement("img",{src:"logo512.png",alt:"logo",height:"60",width:"60"}),"CloudPT"),s.a.createElement("br",null),s.a.createElement("div",{className:"homeBackground"},this.state.showError?s.a.createElement("div",null,s.a.createElement("h4",{className:"alert alert-danger alert-dismissible",role:"alert"}," ",this.state.errorMessage," ")):null,s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Email Address",value:this.state.email,onChange:this.onChangeEmail,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.onChangePassword,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"submit",value:"LOGIN",className:"btn btn-success container"})))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("a",{href:"/register",className:"btn btn-primary container"},"SIGN UP HERE")),s.a.createElement("div",{className:"scroll-down-info"}," Check out the app features!"),s.a.createElement("section",null,s.a.createElement("a",{href:"#",className:"scroll-down"})),s.a.createElement("section",{className:"scrollTo"},s.a.createElement("br",null),s.a.createElement("div",{className:"homeBackground"},s.a.createElement(N.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"30px",lineHeight:"60px"}},"Workout Creation"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Create custom workouts for clients"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Assign workouts to your clients"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"View clients workout history"),s.a.createElement("br",null),s.a.createElement(C.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"30px",lineHeight:"55px"}},"Instant Messaging"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Contact your clients instantly"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Easy to use inbuilt chat feature"),s.a.createElement("br",null),s.a.createElement(O.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"30px",lineHeight:"55px"}},"Track Progress"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"See progress your clients are making during programs"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}})),s.a.createElement("br",null),s.a.createElement("div",{className:"homeBackground"},s.a.createElement(S.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"30px",lineHeight:"60px"}},"Cross-Platform"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Use the application anywhere"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Works on any device"),s.a.createElement("br",null),s.a.createElement(L.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"25px",lineHeight:"60px"}},"Web Application"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Offline operation"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Fast and lightweight"),s.a.createElement("br",null),s.a.createElement(A.a,{style:{fontSize:"65px",float:"left"}}),s.a.createElement("h3",{style:{fontSize:"25px",lineHeight:"60px"}},"Secure and Protected"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"Up-to-date with the latest security"),s.a.createElement("li",{className:"list-group-item",style:{textAlign:"center"}},"HTTPS ensures your information is protected")),s.a.createElement("br",null))))}}]),t}(n.Component),F=a(106),H=a(117),W=a(107),I=a(37),P=a(108),D=a(50),R=a.n(D),G=Object(F.a)((function(e){return{root:{flexGrow:1,top:0,left:0,width:"100%"},menuButton:{marginRight:e.spacing(0)},title:{flexGrow:1,textAlign:"center"}}}));function V(e){var t=G();return s.a.createElement("div",{className:t.root},s.a.createElement(H.a,{position:"fixed",style:{background:"#57D957",boxShadow:"none"}},s.a.createElement(W.a,null,e.back?s.a.createElement(b.b,{to:e.back,style:{color:"#a3a3a3"}},s.a.createElement(P.a,{edge:"start",color:"inherit","aria-label":"ArrowBackIosIcon"},s.a.createElement(R.a,null))):null,s.a.createElement(I.a,{variant:"h6",className:t.title},e.pageName))),s.a.createElement("br",null),s.a.createElement("br",null))}var B,J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:"HOME"}))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChangeFirstName=a.onChangeFirstName.bind(Object(E.a)(a)),a.onChangeLastName=a.onChangeLastName.bind(Object(E.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(E.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(E.a)(a)),a.changePtTrue=a.changePtTrue.bind(Object(E.a)(a)),a.changePtFalse=a.changePtFalse.bind(Object(E.a)(a)),a.onSubmit=a.onSubmit.bind(Object(E.a)(a)),a.state={firstName:"",lastName:"",email:"",password:"",errorMessage:"",showError:!1,ptBool:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"onChangeLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"changePtTrue",value:function(){this.setState({ptBool:!0})}},{key:"changePtFalse",value:function(){this.setState({ptBool:!1})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=JSON.stringify(this.state);fetch("/api/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:a}).then((function(e){e.json().then((function(e){"/"===e.redirect?window.location="/":(t.setState({errorMessage:"Email is already in use"}),t.setState({showError:!0}))}))})).catch((function(e){return console.log(e)})),this.setState({email:"",password:""})}},{key:"render",value:function(){return s.a.createElement("div",{style:{marginTop:10}},s.a.createElement("div",{className:"fullscreen-bg"},s.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"",className:"fullscreen-bg__video"},s.a.createElement("source",{src:"/login-video.mp4",type:"video/mp4"}))),s.a.createElement("p",{className:"appTitle"},s.a.createElement("img",{src:"logo512.png",alt:"logo",height:"60",width:"60"}),"CloudPT"),s.a.createElement("br",null),s.a.createElement("div",{className:"homeBackground"},s.a.createElement("h3",null,"CREATE YOUR ACCOUNT"),s.a.createElement("form",{onSubmit:this.onSubmit},this.state.showError?s.a.createElement("div",null,s.a.createElement("h4",{className:"alert alert-danger alert-dismissible",role:"alert"}," ",this.state.errorMessage," ")):null,s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",id:"firstName",className:"form-control",placeholder:"First Name",value:this.state.firstName,onChange:this.onChangeFirstName,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",id:"lastName",className:"form-control",placeholder:"Last Name",value:this.state.lastName,onChange:this.onChangeLastName,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"email",id:"email",className:"form-control",placeholder:"Email Address",value:this.state.email,onChange:this.onChangeEmail,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"password",id:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.onChangePassword,required:!0})),s.a.createElement("h5",null,"Do you want to register as a personal trainer?",s.a.createElement("p",null),s.a.createElement("div",{className:"btn-group btn-group-toggle container","data-toggle":"buttons"},s.a.createElement("label",{className:"btn btn-light active"},s.a.createElement("input",{type:"radio",onClick:this.changePtTrue}),"Yes"),s.a.createElement("label",{className:"btn btn-light active"},s.a.createElement("input",{type:"radio",onClick:this.changePtFalse,defaultChecked:!0}),"No"))),s.a.createElement("div",{className:"form-group"},s.a.createElement("br",null),s.a.createElement("input",{type:"submit",value:"REGISTER",className:"btn btn-success container"})))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("a",{href:"/",className:"btn btn-primary container"},"LOGIN HERE")))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:"WORKOUTS"}))}}]),t}(n.Component),q=a(109),Y=a(116),K=a(110),Q=a(111),X=a(51),Z=a.n(X),$="",ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={messages:"",currentUser:"",email:"",getUser:"",showError:!1,errorMsg:"",userList:[],userListLoaded:!1},a.onChangeEmail=a.onChangeEmail.bind(Object(E.a)(a)),a.startChat=a.startChat.bind(Object(E.a)(a)),a.loadMessages=a.loadMessages.bind(Object(E.a)(a)),""===$&&($=new WebSocket("ws://localhost:4000/")),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.userListLoaded){e.next=3;break}return e.next=3,this.loadMessages();case 3:""!==this.state.currentUser&&($.send(JSON.stringify({messageType:"email",email:this.state.currentUser[0].email})),$.onopen=function(e){$.send(JSON.stringify({messageType:"email",email:t.state.currentUser[0].email}))}),$.onmessage=function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"messageSent"===JSON.parse(a.data).messageType&&(t.resetStates(),t.loadMessages());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({userListLoaded:!1})}},{key:"loadMessages",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resetStates(),e.next=3,this.getMessages();case 3:return e.next=5,this.getAllUsers();case 5:this.createMessageLists(),this.setState({userListLoaded:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetStates",value:function(){this.setState({messages:"",currentUser:"",email:"",getUser:"",showError:!1,errorMsg:"",userList:[],userListLoaded:!1})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"getAllUsers",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.currentUser||""===this.state.messages){e.next=18;break}t=0;case 2:if(!(t<this.state.messages.length)){e.next=18;break}for(a=!1,n=0;n<this.state.userList.length;n++)this.state.userList[n].email!==this.state.messages[t].userTo&&this.state.userList[n].email!==this.state.messages[t].userFrom||(a=!0);if(a){e.next=15;break}if(this.state.messages[t].userTo===this.state.currentUser[0].email){e.next=12;break}return e.next=9,this.getUser(this.state.messages[t].userTo);case 9:null!==this.state.getUser&&this.state.userList.push(this.state.getUser),e.next=15;break;case 12:return e.next=14,this.getUser(this.state.messages[t].userFrom);case 14:null!==this.state.getUser&&this.state.userList.push(this.state.getUser);case 15:t++,e.next=2;break;case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createMessageLists",value:function(){for(var e=0;e<this.state.userList.length;e++){var t=this.state.userList;t[e]=[t[e],[]],this.setState({userList:t});for(var a=0;a<this.state.messages.length;a++)if(this.state.messages[a].userTo===this.state.userList[e][0].email||this.state.messages[a].userFrom===this.state.userList[e][0].email){var n=this.state.userList;n[e][1].push(this.state.messages[a]),this.setState({userList:n})}}this.state.userList.sort((function(e,t){return new Date(t[1][t[1].length-1].date)-new Date(e[1][e[1].length-1].date)}))}},{key:"startChat",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.getUser(this.state.email);case 3:if(null!=this.state.getUser.email)if(this.state.getUser.email!==this.state.currentUser[0].email)for(0===this.state.userList.length&&this.props.history.push({pathname:"/chat",messages:[],userTo:this.state.getUser,currentUser:this.state.currentUser,socket:$}),a=0;a<this.state.userList.length;a++)this.state.userList[a][0].email===this.state.email?this.props.history.push({pathname:"/chat",messages:this.state.userList[a][1],userTo:this.state.userList[a][0],currentUser:this.state.currentUser,socket:$}):this.props.history.push({pathname:"/chat",messages:[],userTo:this.state.getUser,currentUser:this.state.currentUser,socket:$});else this.setState({showError:!0,errorMsg:"You can't start a chat with yourself!",email:""});else this.setState({showError:!0,errorMsg:"There is no user with that email address!",email:""});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({email:t}),this.setState({getUser:null}),e.next=4,fetch("/api/user",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:a}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=t.user&&n.setState({getUser:t.user});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMessages",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/messages",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json().then((function(e){t.setState({messages:e.messages,currentUser:e.currentUser})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"captitaliseFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:"MESSAGES"}),this.state.showError?s.a.createElement("h6",{className:"alert alert-danger alert-dismissible",role:"alert"}," ",this.state.errorMsg," "):null,s.a.createElement("button",{type:"button",className:"btn btn-primary container","data-toggle":"modal","data-target":"#newChatModal"},"Start New Chat"),s.a.createElement(q.a,{className:"userList"},this.state.userListLoaded?this.state.userList.map((function(t,a){return s.a.createElement(Y.a,{key:a,style:(a+1)%2?{background:"#e3e3e3"}:{background:"white"}},s.a.createElement(K.a,null,s.a.createElement(Z.a,null)),s.a.createElement(b.b,{to:{pathname:"/chat",messages:t[1],userTo:t[0],currentUser:e.state.currentUser,socket:$}},t[1][t[1].length-1].read||t[1][t[1].length-1].userTo!==e.state.currentUser[0].email?s.a.createElement(Q.a,{primary:e.captitaliseFirstLetter(t[0].firstName)+" "+e.captitaliseFirstLetter(t[0].lastName),secondary:t[1][t[1].length-1].text}):s.a.createElement(Q.a,{style:{textShadow:"0px 0px 1px #333"},primary:e.captitaliseFirstLetter(t[0].firstName)+" "+e.captitaliseFirstLetter(t[0].lastName),secondary:t[1][t[1].length-1].text})))})):null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"modal fade",id:"newChatModal"},s.a.createElement("div",{className:"modal-dialog"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h4",{className:"modal-title"},"Start New Chat"),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"\xd7")),s.a.createElement("div",{className:"modal-body"},"Enter the users email address below:",s.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Email Address",value:this.state.email,onChange:this.onChangeEmail,required:!0})),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.startChat},"Start Chat"),s.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close")))))))}}]),t}(n.Component),te=[],ae=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={text:"",currentUser:a.props.location.currentUser,userTo:a.props.location.userTo},a.onChangeText=a.onChangeText.bind(Object(E.a)(a));try{a.props.location.messages.map((function(e){a.markMessageAsRead(e)}))}catch(n){window.location="/messages"}return a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(1e6,1e6),this.props.location.socket.onmessage=function(t){var a=JSON.parse(t.data);if("messageSent"===a.messageType){t.preventDefault();var n={text:a.text,user:{firstName:a.userFrom[0].firstName,lastName:a.userFrom[0].lastName,email:a.userFrom[0].email},userTo:a.userTo.email,newMessage:!0,_id:a._id};te.push(n),e.setState({}),e.markMessageAsRead(n)}}}},{key:"componentDidUpdate",value:function(){window.scrollTo(1e6,1e6)}},{key:"onChangeText",value:function(e){e.preventDefault(),this.setState({text:e.target.value})}},{key:"onSubmit",value:function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===this.state.text){e.next=5;break}return te.push({text:this.state.text,userTo:{firstName:this.props.location.currentUser.firstName,lastName:this.props.location.currentUser.lastName,email:this.props.location.currentUser.email}}),e.next=5,this.sendMessage();case 5:this.setState({text:""});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(this.state),e.next=3,fetch("/api/messages",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:t}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t._id;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:this.props.location.socket.send(JSON.stringify({messageType:"messageSent",_id:a,text:this.state.text,userTo:this.state.userTo,userFrom:this.state.currentUser}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"markMessageAsRead",value:function(e){var t=JSON.stringify(e);(e.userTo===this.state.currentUser[0].email||e.newMessage)&&fetch("/api/message/read",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:t})}},{key:"renderMessage",value:function(e){var t,a;return e.userTo===this.props.location.currentUser[0].email?(t="notCurrentUser",a=this.state.userTo):(t="currentUser",a=this.props.location.currentUser[0]),s.a.createElement("div",{className:t},s.a.createElement("div",{className:"messageContent"},s.a.createElement("div",{className:"username"},this.captitaliseFirstLetter(a.firstName)," ",this.captitaliseFirstLetter(a.lastName)),s.a.createElement("div",{className:"text"},e.text)))}},{key:"captitaliseFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this;return te=this.props.location.messages,B=this.props.location.userTo,s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:this.captitaliseFirstLetter(B.firstName)+" "+this.captitaliseFirstLetter(B.lastName),back:"/messages"}),s.a.createElement("div",{className:"messageList"},te.map((function(t,a){return s.a.createElement("ul",{key:a},e.renderMessage(t))}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"chatInput"},s.a.createElement("form",{className:"chatInputForm",onSubmit:function(t){return e.onSubmit(t)}},s.a.createElement("input",{className:"form-control",onChange:this.onChangeText,value:this.state.text,type:"text",placeholder:"Enter your message here"}),s.a.createElement("button",{className:"sendButton",type:"submit"},"Send"))),s.a.createElement("div",{className:"chatHide"}))}}]),t}(n.Component),ne=a(112);function se(e){return s.a.createElement(Y.a,Object.assign({button:!0,component:"a"},e))}var re=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChange=a.onChange.bind(Object(E.a)(a)),a.state={auth:!1},a.onChange=a.onChange.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){this.setState({auth:e.target.value})}},{key:"componentDidMount",value:function(){}},{key:"logout",value:function(){fetch("/api/logout",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){e.json().then((function(e){!0===e.logout&&(window.location="/")}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props;return s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:"ACCOUNT"}),s.a.createElement("div",{className:e.root},s.a.createElement(q.a,{component:"nav","aria-label":"main mailbox folders"},s.a.createElement(b.b,{to:"/account/weight"},s.a.createElement(Y.a,null,s.a.createElement(Q.a,{primary:"Update Weight"}))),s.a.createElement(Y.a,{button:!0},s.a.createElement(Q.a,{primary:"Update Height"})),s.a.createElement(Y.a,{button:!0},s.a.createElement(Q.a,{primary:"Update User Details"}))),s.a.createElement(ne.a,null),s.a.createElement(q.a,{component:"nav","aria-label":"secondary mailbox folders"},s.a.createElement(Y.a,{button:!0},s.a.createElement(Q.a,{primary:"Trash"})),s.a.createElement(se,null,s.a.createElement(Q.a,{primary:"Spam"}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"button",value:"Logout",className:"btn btn-primary",onClick:this.logout}))))}}]),t}(n.Component),ie=a(57),le=a(113),ce=a(114),oe=a(54),ue=a.n(oe),me=a(55),he=a.n(me),de=Object(F.a)({root:{top:"auto",width:"100%",position:"fixed",bottom:0,left:"0%",zIndex:100,color:"blue"}});function pe(){var e=de(),t=s.a.useState("home"),a=Object(ie.a)(t,2),n=a[0],r=a[1],i=Object(f.f)();return s.a.createElement(le.a,{value:n,onChange:function(e,t){i.push("/".concat(t)),r(t)},className:e.root,showLabels:!0},s.a.createElement(ce.a,{label:"Home",value:"home",icon:s.a.createElement(ue.a,null)}),s.a.createElement(ce.a,{label:"Workouts",value:"workout",icon:s.a.createElement(N.a,null)}),s.a.createElement(ce.a,{label:"Messages",value:"messages",icon:s.a.createElement(C.a,null)}),s.a.createElement(ce.a,{label:"Account",value:"account",icon:s.a.createElement(he.a,null)}))}var ge=a(41),fe=a.n(ge),be=a(115),Ee=a(56),ve=a.n(Ee),ye=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={weight:60,height:150,userHeight:!1,date:new Date},a.handleValueWeight=a.handleValueWeight.bind(Object(E.a)(a)),a.handleValueHeight=a.handleValueHeight.bind(Object(E.a)(a)),a.renderSlideRulerWeight=a.renderSlideRulerWeight.bind(Object(E.a)(a)),a.renderSlideRulerHeight=a.renderSlideRulerHeight.bind(Object(E.a)(a)),a.addWeight=a.addWeight.bind(Object(E.a)(a)),a.getWeight=a.getWeight.bind(Object(E.a)(a)),a.deleteWeight=a.deleteWeight.bind(Object(E.a)(a)),a.updateHeight=a.updateHeight.bind(Object(E.a)(a)),a.getHeight=a.getHeight.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleValueWeight",value:function(e){this.setState({weight:e})}},{key:"handleValueHeight",value:function(e){this.setState({height:e})}},{key:"renderSlideRulerWeight",value:function(){return new fe.a({el:this.refs.slideRulerWeight,maxValue:250,minValue:30,currentValue:80,handleValue:this.handleValueWeight,precision:.1,fontColor:"#FFFFFF"})}},{key:"renderSlideRulerHeight",value:function(){return new fe.a({el:this.refs.slideRulerHeight,maxValue:250,minValue:30,currentValue:150,handleValue:this.handleValueHeight,precision:.5,fontColor:"#FFFFFF"})}},{key:"componentDidMount",value:function(){this.getWeight(),this.getHeight(),this.renderSlideRulerWeight(),this.renderSlideRulerHeight()}},{key:"getWeight",value:function(e){var t=this;fetch("/api/weight/",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){e.json().then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({allWeights:a.weights});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){return console.log(e)}))}},{key:"addWeight",value:function(e){var t=JSON.stringify(this.state);fetch("/api/weight/",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:t}).then((function(e){e.json().then((function(e){e.redirect}))})).catch((function(e){return console.log(e)})),window.location.reload()}},{key:"deleteWeight",value:function(e){fetch("/api/weight/"+e._id,{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){e.json().then((function(e){e.redirect}))})).catch((function(e){return console.log(e)})),window.location.reload()}},{key:"updateHeight",value:function(e){var t=JSON.stringify(this.state);fetch("/api/height/",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:t}).then((function(e){e.json().then((function(e){e.redirect}))})).catch((function(e){return console.log(e)})),window.location.reload()}},{key:"getHeight",value:function(){var e=this;fetch("/api/height/",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(t){t.json().then(function(){var t=Object(o.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({userHeight:a.height});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,s.a.createElement(V,{width:"100%",pageName:"HEIGHT & WEIGHT",back:"/account"}),s.a.createElement("h4",null,"Current Height: ",this.state.userHeight?s.a.createElement("b",null,this.state.userHeight," cm"):null),s.a.createElement("button",{type:"button",className:"btn btn-primary container","data-toggle":"modal","data-target":"#heightModal"},"Update Height"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("h4",null,"Current Weight: "," KG"),s.a.createElement("button",{type:"button",className:"btn btn-primary container","data-toggle":"modal","data-target":"#weightModal"},"Update Weight"),s.a.createElement("div",{style:{height:"auto"}},s.a.createElement(q.a,{className:"weightList"},this.state.allWeights&&this.state.allWeights.map((function(t,a){return s.a.createElement(Y.a,{key:a},s.a.createElement(Q.a,null,t.weight," kg - ",new Date(t.date).getDate(),"/",new Date(t.date).getMonth(),"/",new Date(t.date).getFullYear()),s.a.createElement(be.a,{onClick:function(){return e.deleteWeight(t)}},s.a.createElement(P.a,{edge:"end"},s.a.createElement(ve.a,null))))})))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"modal fade",id:"weightModal"},s.a.createElement("div",{className:"modal-dialog"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h4",{className:"modal-title"},"Manual Weight Input"),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("div",{ref:"slideRulerWeight",className:"ruler"}),"Weight: ",this.state.weight," KG"),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.addWeight},"Add Weight"),s.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close")))))),s.a.createElement("div",{className:"modal fade",id:"heightModal"},s.a.createElement("div",{className:"modal-dialog"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h4",{className:"modal-title"},"Manual Height Input"),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("div",{ref:"slideRulerHeight",className:"ruler"}),"Height: ",this.state.height," CM"),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.updateHeight},"Update Height"),s.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close"))))),s.a.createElement("br",null)," ",s.a.createElement("br",null)," ",s.a.createElement("br",null))}}]),t}(n.Component);function we(e){var t=e.component,a=e.authed,n=e.wasInitialised,r=Object(g.a)(e,["component","authed","wasInitialised"]);return s.a.createElement(f.b,Object.assign({},r,{render:function(e){return!0===a?s.a.createElement(t,e):n?s.a.createElement(f.a,{to:{pathname:"/"}}):""}}))}var Ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={auth:!1,ptBool:!1,wasInitialised:!1},a.checkAuth(),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAuth",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/auth/",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json().then((function(e){"/home"===e.redirect?t.setState({auth:!0,ptBool:e.ptBool,wasInitialised:!0}):t.setState({auth:!1,wasInitialised:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(b.a,null,s.a.createElement("div",{className:"container"},s.a.createElement("div",null,this.state.auth?s.a.createElement(pe,null):null),s.a.createElement("br",null),s.a.createElement(f.b,{path:"/",exact:!0,component:M}),s.a.createElement(f.b,{path:"/register",exact:!0,component:z}),this.state.ptBool?s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/workout",component:_}):s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/workout",component:J}),s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/home",component:J}),s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/messages",component:ee}),s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/chat",component:ae}),s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/account",component:re}),s.a.createElement(we,{authed:this.state.auth,wasInitialised:this.state.wasInitialised,exact:!0,path:"/account/weight",component:ye})))}}]),t}(n.Component);i.a.render(s.a.createElement(Ne,null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.3f40dbc9.chunk.js.map